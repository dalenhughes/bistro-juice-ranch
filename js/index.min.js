jQuery(document).ready(function(e){var t=e(".woocommerce-message .wc-forward").attr("href");void 0!==t&&(window.location=t),e(".mw-custom-order").each(function(t){var a=e(this);console.log("Custom product order builder initialized: "+a.attr("id")),ReactDOM.render(React.createElement(CustomOrder,{form:a.parents("form"),data:CustomOrderData[a.attr("id")],updateTotal:function(e,t){return e}}),a.get(0))})});var ReactCSSTransitionGroup=React.addons.CSSTransitionGroup,CustomOrder=React.createClass({displayName:"CustomOrder",componentDidMount:function(){var e=this;"object"==typeof gform&&gform.addFilter("gform_product_total",e.props.updateTotal),this.updateGravityForm()},getInitialState:function(){return{price:0,quantity:0,details:"",gravityForm:{form:this.props.form,price:this.props.form.find(".gf-product-price input"),details:this.props.form.find(".gf-product-details textarea")}}},completeOrder:function(){this.props.form.find('input[type="submit"]').click()},updateOrder:function(e,t,a){this.setState({price:e,quantity:t,details:a},this.updateGravityForm)},updateGravityForm:function(){console.log("Updating Gravity Form");var e=this.state.gravityForm;e.details.val(this.state.details),e.price.val(this.state.price).change()},render:function(){var e={price:this.state.price,quantity:this.state.quantity,details:this.state.details,data:this.props.data,completeOrder:this.completeOrder,updateOrder:this.updateOrder};return React.createElement("div",{className:"CustomOrder"},React.createElement(CustomOrder.Summary,React.__spread({},e)),React.createElement(CustomOrder.Order,React.__spread({},e)))}});CustomOrder.Order=React.createClass({displayName:"Order",componentDidMount:function(){},getInitialState:function(){return{currentDayOption:1,currentPackage:1,currentStep:0,days:3,juiceSelections:this.makePackage(1,3),lastStep:0}},nextStep:function(e){e.preventDefault();var t=this.state.currentStep+1,a=t>=this.state.lastStep?t:this.state.lastStep;console.log("Moving to the next step: "+t),this.setState({currentStep:t,lastStep:a},this.updateOrder)},setStep:function(e){this.state.lastStep>=e&&(console.log("Setting current step to "+e),this.setState({currentStep:e}))},makePackage:function(e,t){var a=this,r=[],s=function(t){return t.Name==a.props.data.packages[e]["Drink"+juiceIndex]};for(dayIndex=0;dayIndex<t;dayIndex++){var n=[];for(juiceIndex=1;juiceIndex<=6;juiceIndex++)n[juiceIndex-1]=_.find(a.props.data.juices,s);r[dayIndex]=n}return r},updateDays:function(e){console.log("Updating the number of days to "+e.days),this.setState({currentDayOption:e.currentDayOption,days:e.days,juiceSelections:this.makePackage(this.state.currentPackage,e.days)},this.updateOrder)},updatePackage:function(e){var t=this;console.log("Updating the default package to "+t.props.data.packages[e].Name),this.setState({currentPackage:e,juiceSelections:this.makePackage(e,this.state.days)},this.updateOrder)},updateJuiceSelections:function(e,t,a){console.log("Changing day "+e+" and bottle "+t+" to "+a.Name);var r=this.state.juiceSelections;r[e][t]=a,this.setState({juiceSelections:r},this.updateOrder)},updateOrder:function(){var e=this,t=this.props.data.settings[0].PricePerDay*this.state.days,a=0,r="Package: "+e.props.data.packages[e.state.currentPackage].Name+"\n\nJuice Selections\n\n";_.each(e.state.juiceSelections,function(e,t){r+="Day "+(t+1)+": ";var s=[];_.each(e,function(e,t){var r=Number(e.Adjust.replace(/[^0-9\.]+/g,"")),n=r>0?" (+$"+r+")":"";a+=Number(e.Adjust.replace(/[^0-9\.]+/g,"")),s[t-1]=e.Name+n}),r+=s.join(", ")+"\n\n"}),t+=a,console.log(r),this.props.updateOrder(t,1,r)},render:function(){var e={data:this.props.data},t=[React.createElement(CustomOrder.Days,React.__spread({key:"Days"},e,{days:this.state.days,currentDayOption:this.state.currentDayOption,updateDays:this.updateDays,nextStep:this.nextStep})),React.createElement(CustomOrder.Packages,React.__spread({key:"Packages"},e,{currentPackage:this.state.currentPackage,updatePackage:this.updatePackage,nextStep:this.nextStep})),React.createElement(CustomOrder.Customize,React.__spread({key:"Customize"},e,{days:this.state.days,currentPackage:this.state.currentPackage,juiceSelections:this.state.juiceSelections,updateJuiceSelections:this.updateJuiceSelections,nextStep:this.props.completeOrder}))];return React.createElement("div",{className:"Order"},React.createElement(CustomOrder.Navigation,{step:this.state.currentStep,setStep:this.setStep}),React.createElement(ReactCSSTransitionGroup,{transitionName:"step",className:"StepViews",transitionEnterTimeout:500,transitionLeaveTimeout:300},t[this.state.currentStep]))}}),CustomOrder.Navigation=React.createClass({displayName:"Navigation",componentDidMount:function(){},getInitialState:function(){return{}},render:function(){var e=this,t=[{className:"days",label:"No. of Days"},{className:"package",label:"Cleanse Package"},{className:"customize",label:"Customize"},{className:"complete",label:"Review & Place Order"}],a=_.map(t,function(a,r){var s=["mw-step",e.props.step==r?"selected":null,e.props.step>r?"completed":null,a.className].join(" "),n={width:100/t.length+"%"};return React.createElement("li",{key:"Step"+r,style:n,className:s,onClick:e.props.setStep.bind(null,r)},React.createElement("span",null,a.label))}),r={width:100/(t.length-1)*e.props.step+"%"};return React.createElement("div",{className:"Navigation"},React.createElement("div",{className:"mw-progress-bar"},React.createElement("div",{className:"mw-progress",style:r})),React.createElement("ul",{className:"mw-steps"},a))}}),CustomOrder.Days=React.createClass({displayName:"Days",componentDidMount:function(){},getInitialState:function(){return{}},updateDays:function(e,t){var a=e.days;"0"===e.days&&(a=parseInt(t.target.value),""!==t.target.value&&isNaN(a)&&(a=3)),this.props.updateDays({days:a,currentDayOption:e.currentDayOption})},render:function(){var e=this,t=_.map(this.props.data.days,function(t,a){var r,s=["option",e.props.currentDayOption==a?"selected":null,"0"===t.Days?"custom":null].join(" "),n="column column-small-6 column-medium-"+Math.floor(parseFloat(12/e.props.data.days.length));return r="0"===t.Days?React.createElement("div",{className:"description"},React.createElement("input",{className:"input",type:"number",value:e.props.days,onChange:e.updateDays.bind(e,{days:t.Days,currentDayOption:a}),placeholder:"Choose # of Days"})):React.createElement("div",{className:"description"},t.Description),React.createElement("div",{key:"days-"+t.Days,className:n},React.createElement("div",{className:s,onClick:e.updateDays.bind(e,{days:t.Days,currentDayOption:a})},React.createElement("div",{className:"name"},t.Name),React.createElement("div",{className:"description"},r)))});return React.createElement("div",{className:"Days step-view"},React.createElement("header",null,React.createElement("h3",null,"How many days will you cleanse?"),React.createElement("p",{className:"instructions"},"The most popular is a 3-day cleanse, but even a 1-day cleanse will help detoxify your system. The 5-day will cleanse at deep cellular level. It typically takes 2 days to get over the detox symptoms."),React.createElement("p",{className:"pricing"},"$65/Day")),React.createElement("main",{className:"container"},React.createElement("div",{className:"day-options mw-row"},t)),React.createElement("footer",null,React.createElement("button",{onClick:this.props.nextStep},"Next Select Juices ",React.createElement("i",{className:"icon mk-moon-arrow-right-6"}))))}}),CustomOrder.Packages=React.createClass({displayName:"Packages",componentDidMount:function(){},getInitialState:function(){return{}},updatePackage:function(e,t){this.props.updatePackage(e)},render:function(){var e=this,t=_.map(this.props.data.groups,function(e,t){var a={backgroundColor:e.Color,border:parseInt(e.Color.replace("#","0x"))>parseInt("0xEEEEEE")?"1px solid #ccc":"1px transparent"};return t>0?React.createElement("div",{key:"Group"+t,className:"group"},React.createElement("span",{className:"color",style:a}),React.createElement("span",{className:"mw-label"},e.Description)):void 0}),a=_.map(this.props.data.packages,function(t,a){var r,s=[],n={},c=function(e){return e.Name==t["Group"+(i+1)]};for(i=0;i<6;i++){var o=_.find(e.props.data.groups,c),l={backgroundColor:o.Color,border:parseInt(o.Color.replace("#","0x"))>parseInt("0xEEEEEE")?"1px solid #ccc":"1px transparent"};s[i]=React.createElement("span",{key:"PackageGroup"+i,className:"package-group",style:l})}r="Custom"!==t.Name?React.createElement("div",{className:"package-groups"},React.createElement("span",{className:"mw-label"},"Includes:"),s):React.createElement("div",{className:"package-groups"},"Â "),""!==t.Image&&(n={backgroundImage:"url("+t.Image+")"});var u=["option",e.props.currentPackage==a?"selected":null].join(" "),p="column column-small-6 column-medium-"+Math.floor(parseFloat(12/e.props.data.packages.length)),m={backgroundImage:"url("+t.TagImage+")"};return React.createElement("div",{key:"Package"+a,className:p},React.createElement("div",{className:"tag",style:m}),React.createElement("div",{className:u,onClick:e.updatePackage.bind(e,a)},React.createElement("div",{className:"information",style:n},React.createElement("div",{className:"name"},t.Name),React.createElement("div",{className:"description"},t.Description)),r))});return React.createElement("div",{className:"Packages step-view"},React.createElement("header",null,React.createElement("h3",null,"Select your cleanse package"),React.createElement("p",{className:"instructions"},"These packages are great guides but have no fear you can customize as you go!")),React.createElement("main",{className:"container"},React.createElement("div",{className:"package-options mw-row"},a),React.createElement("div",{className:"group-legend"},t)),React.createElement("footer",null,React.createElement("button",{onClick:this.props.nextStep},"Next Customize Juices ",React.createElement("i",{className:"icon mk-moon-arrow-right-6"})),React.createElement("div",{className:"addendum"},React.createElement("p",null,"All cleanses accompanied with alkaline citrus water, E3 Live, and Aloe Vera shots."),React.createElement("p",null,React.createElement("img",{src:"http://stage.juiceranch.com/wp-content/uploads/2016/02/aloe-vera-shot-1.png",alt:"Aloe Vera Shot"}),React.createElement("img",{src:"http://stage.juiceranch.com/wp-content/uploads/2016/02/e3-live-shot.png",alt:"E3 Live Shot"})))))}}),CustomOrder.Customize=React.createClass({displayName:"Customize",componentDidMount:function(){},getInitialState:function(){return{currentDay:0}},updateCurrentDay:function(e,t){console.log("Displaying juices selections for day "+e),this.setState({currentDay:e})},render:function(){var e=this,t=_.map(this.props.juiceSelections,function(t,a){return React.createElement(CustomOrder.Customize.Day,{key:"DayView"+a,data:e.props.data,currentPackage:e.props.currentPackage,updateJuiceSelections:e.props.updateJuiceSelections,currentDay:e.state.currentDay,juiceSelections:t})});return React.createElement("div",{className:"Customize step-view"},React.createElement("header",null,React.createElement("h3",null,"Customize your juice selections"),React.createElement("p",{className:"instructions"},"Go ahead and change it up to your liking, but just remember that the greens have the most detoxify capabilities.")),React.createElement("main",null,React.createElement(CustomOrder.Customize.Navigation,React.__spread({},this.props,{currentDay:this.state.currentDay,updateCurrentDay:this.updateCurrentDay})),React.createElement(ReactCSSTransitionGroup,{transitionName:"day",className:"DayViews"},t[this.state.currentDay])),React.createElement("footer",null,React.createElement("button",{onClick:this.props.nextStep},"Review & place order ",React.createElement("i",{className:"icon mk-moon-arrow-right-6"}))))}}),CustomOrder.Customize.Navigation=React.createClass({displayName:"Navigation",componentDidMount:function(){},getInitialState:function(){return{}},render:function(){var e=[];for(dayIndex=0;dayIndex<this.props.days;dayIndex++){var t=["option","column-small-4 column-medium-"+Math.floor(parseFloat(12/this.props.days)),dayIndex==this.props.currentDay?"selected":null].join(" "),a={width:100/this.props.days+"%"};e[dayIndex]=React.createElement("div",{className:t,style:a,key:"DaySelector"+dayIndex,onClick:this.props.updateCurrentDay.bind(null,dayIndex)},"Day ",dayIndex+1)}return React.createElement("div",{className:"CustomizeNavigation mw-row"},e)}}),CustomOrder.Customize.Day=React.createClass({displayName:"Day",componentDidMount:function(){},getInitialState:function(){return{}},render:function(){var e=this,t=_.map(this.props.juiceSelections,function(t,a){return React.createElement(CustomOrder.Customize.Juice,{data:e.props.data,currentDay:e.props.currentDay,currentPackage:e.props.currentPackage,updateJuiceSelections:e.props.updateJuiceSelections,currentJuice:t,juiceIndex:a})});return React.createElement("div",{key:"Day"+e.props.currentDay,className:"CustomizeDay mw-row"},React.createElement("div",{className:"selection-label"}),t)}}),CustomOrder.Customize.Juice=React.createClass({displayName:"Juice",componentDidMount:function(){},getInitialState:function(){return{showingOptions:!1}},updateJuice:function(e){var t=this,a=_.find(t.props.data.juices,function(t){return t.Name==e});this.toggleOptions(),this.props.updateJuiceSelections(this.props.currentDay,this.props.juiceIndex,a)},toggleOptions:function(){this.setState({showingOptions:!this.state.showingOptions},function(){console.log("Toggling showingOptions to "+this.state.showingOptions)})},render:function(){var e=this,t=this.props.data,a=_.find(t.groups,function(a){return a.Name==t.packages[e.props.currentPackage]["Group"+(e.props.juiceIndex+1)]}),r=_.map(_.filter(e.props.data.juices,function(e){return e.Group==a.Name||"All"==a.Name}),function(t,a){var r=["option"].join(" "),s=Number(t.Adjust.replace(/[^0-9\.]+/g,"")),n=s>0?"(+$"+s+")":null;return React.createElement("li",{key:"JuiceOpion"+a,className:r,onClick:e.updateJuice.bind(null,t.Name)},t.Name," ",n)}),s=["Juice",e.state.showingOptions?"show":null].join(" ");return React.createElement("div",{className:"column-small-4 column-medium-2"},React.createElement("div",{className:s},React.createElement("div",{className:"image",onClick:this.toggleOptions},React.createElement("img",{src:this.props.currentJuice.Image,alt:this.props.currentJuice.Name,className:"bottle"})),React.createElement("div",{className:"information"},React.createElement("div",{className:"name"},this.props.currentJuice.Name),React.createElement("div",{className:"ingredients"},this.props.currentJuice.Ingredients)),React.createElement("div",{className:"juice-selector"},React.createElement("ul",{className:"options"},r))))}}),CustomOrder.Summary=React.createClass({displayName:"Summary",componentDidMount:function(){},getInitialState:function(){return{}},render:function(){return React.createElement("div",{className:"Summary"})}});